{% extends "bookings/base.html" %}
{% load static %}
{% block title %}Vehicles{% endblock %}
{% block extra_css %} <link rel="stylesheet" href="{% static 'vehicles/list.css' %}"> {% endblock %}
{% block content %}
<div class="page-head">
  <div>
    <h1 class="page-title">Rent a Vehicle</h1>
    <p class="muted">Search by name, city, and type. Choose a vehicle to view details & book.</p>
  </div>
</div>

<form class="searchbar vehicle-search" method="get">
  <input type="text" name="q" placeholder="Search vehicle name/model..." value="{{ q }}">
  <input type="text" name="city" placeholder="City..." value="{{ city }}">

  <select name="type">
    <option value="">All types</option>
    <option value="car" {% if type == 'car' %}selected{% endif %}>Car</option>
    <option value="suv" {% if type == 'suv' %}selected{% endif %}>SUV</option>
    <option value="van" {% if type == 'van' %}selected{% endif %}>Van</option>
    <option value="bike" {% if type == 'bike' %}selected{% endif %}>Bike</option>
    <option value="scooter" {% if type == 'scooter' %}selected{% endif %}>Scooter</option>
  </select>

  <button type="submit">Search</button>
</form>

<div class="grid vehicles-grid">
  {% for v in vehicles %}
  <a class="card vehicle-card" href="{% url 'vehicles:vehicle_detail' v.id %}">
    {% if v.image %}
      <img src="{{ v.image.url }}" class="card-img" alt="{{ v.name }}">
    {% else %}
      <div class="card-img placeholder">No Image</div>
    {% endif %}

    <div class="card-body">
      <h3 class="card-title">{{ v.name }}</h3>
      <p class="muted card-meta">{{ v.get_vehicle_type_display }} · {{ v.shop.city }} · {{ v.shop.name }}</p>

      <div class="card-bottom">
        <p class="price">₹ {{ v.price_per_day }} <span class="muted small">/ day</span></p>
        <span class="cta">View →</span>
      </div>
    </div>
  </a>
  {% empty %}
    <div class="empty-state card">
      <h3>No vehicles found</h3>
      <p class="muted">Try changing city/type or clear the search.</p>
    </div>
  {% endfor %}
</div>
{% endblock %}