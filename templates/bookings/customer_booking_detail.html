{% extends "bookings/base.html" %}
{% load static %}
{% block title %}Booking Details{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/booking_detail.css' %}">
{% endblock %}

{% block content %}
<div class="bd-wrap">
  <div class="bd-card">
    <div class="bd-head">
      <div>
        <h2 class="bd-title">Hotel Booking Details</h2>
        <p class="bd-sub">Booking ID: <span class="bd-pill">#{{ booking.id }}</span></p>
      </div>
      <div class="bd-status">
        <span class="bd-badge bd-badge--{{ booking.status|default:'placed' }}">{{ booking.status|default:"Placed" }}</span>
        {% if booking.is_paid %}
          <span class="bd-badge bd-badge--paid">Paid</span>
        {% else %}
          <span class="bd-badge bd-badge--unpaid">Unpaid</span>
        {% endif %}
      </div>
    </div>

    <div class="bd-grid">
      <div class="bd-section">
        <h3>Hotel</h3>
        <div class="bd-row"><span>Name</span><b>{{ booking.room.hotel.name }}</b></div>
        <div class="bd-row"><span>Address</span><b>{{ booking.room.hotel.address }}</b></div>
        <div class="bd-row"><span>Hotel Mobile</span><b>{{ booking.room.hotel.mobile_number }}</b></div>
      </div>

      <div class="bd-section">
        <h3>Stay</h3>
        <div class="bd-row"><span>Room</span><b>{{ booking.room.name }}</b></div>
        <div class="bd-row"><span>Check-in</span><b>{{ booking.check_in }}</b></div>
        <div class="bd-row"><span>Check-out</span><b>{{ booking.check_out }}</b></div>
        <div class="bd-row"><span>Total Rooms</span><b>{{ booking.room.total_rooms|default:"-" }}</b></div>
      </div>

      <div class="bd-section">
        <h3>Customer</h3>
        <div class="bd-row"><span>Name</span><b>{{ booking.user.username|default:request.user.get_full_name }}</b></div>
        <div class="bd-row"><span>Mobile</span><b>{{ booking.customer_mobile_number|default:request.user.profile.mobile_number }}</b></div>
        <div class="bd-row"><span>Email</span><b>{{ request.user.email }}</b></div>
      </div>

      <div class="bd-section">
        <h3>Payment</h3>
        <div class="bd-row"><span>Total</span><b>â‚¹ {{ total_amount }}</b></div>
        <div class="bd-row"><span>Razorpay Order</span><b class="bd-mono">{{ booking.razorpay_order_id|default:"-" }}</b></div>
        <div class="bd-row"><span>Razorpay Payment</span><b class="bd-mono">{{ booking.razorpay_payment_id|default:"-" }}</b></div>
      </div>
    </div>

    <div class="bd-actions">
      <a class="bd-btn bd-btn--ghost" href="{% url 'booking:my_bookings' %}">Back</a>
       <a class="bd-btn bd-btn--primary" href="{% url 'booking:cancel_booking' booking.id %}">Cancel Booking</a>
    </div>
  </div>
</div>
{% endblock %}